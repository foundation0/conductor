let p,S,W,q,M,z,T,j,L,I,R,pn=(async()=>{const J="/assets/tiktoken_bg-89b5fa67.wasm",N=async(n={},t)=>{let _;if(t.startsWith("data:")){const o=t.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(o,"base64");else if(typeof atob=="function"){const d=atob(o);r=new Uint8Array(d.length);for(let i=0;i<d.length;i++)r[i]=d.charCodeAt(i)}else throw new Error("Cannot decode base64-encoded data URL");_=await WebAssembly.instantiate(r,n)}else{const o=await fetch(t),r=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))_=await WebAssembly.instantiateStreaming(o,n);else{const d=await o.arrayBuffer();_=await WebAssembly.instantiate(d,n)}}return _.instance.exports};let e;W=function(n){e=n};const u=new Array(128).fill(void 0);u.push(void 0,null,!0,!1);function h(n){return u[n]}let y=u.length;function P(n){n<132||(u[n]=y,y=n)}function k(n){const t=h(n);return P(n),t}let b=0,x=null;function f(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(e.memory.buffer)),x}const F=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let m=new F("utf-8");const G=typeof m.encodeInto=="function"?function(n,t){return m.encodeInto(n,t)}:function(n,t){const _=m.encode(n);return t.set(_),{read:n.length,written:_.length}};function g(n,t,_){if(_===void 0){const s=m.encode(n),l=t(s.length);return f().subarray(l,l+s.length).set(s),b=s.length,l}let o=n.length,r=t(o);const d=f();let i=0;for(;i<o;i++){const s=n.charCodeAt(i);if(s>127)break;d[r+i]=s}if(i!==o){i!==0&&(n=n.slice(i)),r=_(r,o,o=i+n.length*3);const s=f().subarray(r+i,r+o),l=G(n,s);i+=l.written}return b=i,r}function H(n){return n==null}let A=null;function a(){return(A===null||A.byteLength===0)&&(A=new Int32Array(e.memory.buffer)),A}const K=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let O=new K("utf-8",{ignoreBOM:!0,fatal:!0});O.decode();function v(n,t){return O.decode(f().subarray(n,n+t))}function w(n){y===u.length&&u.push(u.length+1);const t=y;return y=u[t],u[t]=n,t}let E=null;function U(){return(E===null||E.byteLength===0)&&(E=new Uint32Array(e.memory.buffer)),E}function B(n,t){return U().subarray(n/4,n/4+t)}function Q(n,t){const _=t(n.length*1);return f().set(n,_/1),b=n.length,_}function V(n,t){const _=t(n.length*4);return U().set(n,_/4),b=n.length,_}function C(n,t){return f().subarray(n/1,n/1+t)}R=function(n,t){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const d=e.__wbindgen_add_to_stack_pointer(-16),i=g(n,e.__wbindgen_export_0,e.__wbindgen_export_1),s=b;e.get_encoding(d,i,s,w(t));var _=a()[d/4+0],o=a()[d/4+1],r=a()[d/4+2];if(r)throw k(o);return p.__wrap(_)}finally{e.__wbindgen_add_to_stack_pointer(16)}},I=function(n,t){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const d=e.__wbindgen_add_to_stack_pointer(-16),i=g(n,e.__wbindgen_export_0,e.__wbindgen_export_1),s=b;e.encoding_for_model(d,i,s,w(t));var _=a()[d/4+0],o=a()[d/4+1],r=a()[d/4+2];if(r)throw k(o);return p.__wrap(_)}finally{e.__wbindgen_add_to_stack_pointer(16)}};function D(n,t){try{return n.apply(this,t)}catch(_){e.__wbindgen_export_3(w(_))}}p=class{static __wrap(n){const t=Object.create(p.prototype);return t.ptr=n,t}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const n=this.__destroy_into_raw();e.__wbg_tiktoken_free(n)}constructor(n,t,_){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const o=g(n,e.__wbindgen_export_0,e.__wbindgen_export_1),r=b,d=g(_,e.__wbindgen_export_0,e.__wbindgen_export_1),i=b,s=e.tiktoken_new(o,r,w(t),d,i);return p.__wrap(s)}get name(){try{const _=e.__wbindgen_add_to_stack_pointer(-16);e.tiktoken_name(_,this.ptr);var n=a()[_/4+0],t=a()[_/4+1];let o;return n!==0&&(o=v(n,t).slice(),e.__wbindgen_export_2(n,t*1)),o}finally{e.__wbindgen_add_to_stack_pointer(16)}}encode(n,t,_){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const l=e.__wbindgen_add_to_stack_pointer(-16),kn=g(n,e.__wbindgen_export_0,e.__wbindgen_export_1),fn=b;e.tiktoken_encode(l,this.ptr,kn,fn,w(t),w(_));var o=a()[l/4+0],r=a()[l/4+1],d=a()[l/4+2],i=a()[l/4+3];if(i)throw k(d);var s=B(o,r).slice();return e.__wbindgen_export_2(o,r*4),s}finally{e.__wbindgen_add_to_stack_pointer(16)}}encode_ordinary(n){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const r=e.__wbindgen_add_to_stack_pointer(-16),d=g(n,e.__wbindgen_export_0,e.__wbindgen_export_1),i=b;e.tiktoken_encode_ordinary(r,this.ptr,d,i);var t=a()[r/4+0],_=a()[r/4+1],o=B(t,_).slice();return e.__wbindgen_export_2(t,_*4),o}finally{e.__wbindgen_add_to_stack_pointer(16)}}encode_with_unstable(n,t,_){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const i=e.__wbindgen_add_to_stack_pointer(-16),s=g(n,e.__wbindgen_export_0,e.__wbindgen_export_1),l=b;e.tiktoken_encode_with_unstable(i,this.ptr,s,l,w(t),w(_));var o=a()[i/4+0],r=a()[i/4+1],d=a()[i/4+2];if(d)throw k(r);return k(o)}finally{e.__wbindgen_add_to_stack_pointer(16)}}encode_single_token(n){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const t=Q(n,e.__wbindgen_export_0),_=b;return e.tiktoken_encode_single_token(this.ptr,t,_)>>>0}decode(n){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const r=e.__wbindgen_add_to_stack_pointer(-16),d=V(n,e.__wbindgen_export_0),i=b;e.tiktoken_decode(r,this.ptr,d,i);var t=a()[r/4+0],_=a()[r/4+1],o=C(t,_).slice();return e.__wbindgen_export_2(t,_*1),o}finally{e.__wbindgen_add_to_stack_pointer(16)}}decode_single_token_bytes(n){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");try{const r=e.__wbindgen_add_to_stack_pointer(-16);e.tiktoken_decode_single_token_bytes(r,this.ptr,n);var t=a()[r/4+0],_=a()[r/4+1],o=C(t,_).slice();return e.__wbindgen_export_2(t,_*1),o}finally{e.__wbindgen_add_to_stack_pointer(16)}}token_byte_values(){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const n=e.tiktoken_token_byte_values(this.ptr);return k(n)}},T=function(n){k(n)},z=function(n){return h(n)===void 0},q=function(){return D(function(n){const t=JSON.stringify(h(n));return w(t)},arguments)},j=function(n,t){if(e==null)throw new Error("@dqbd/tiktoken: WASM binary has not been propery initialized.");const _=h(t),o=typeof _=="string"?_:void 0;var r=H(o)?0:g(o,e.__wbindgen_export_0,e.__wbindgen_export_1),d=b;a()[n/4+1]=d,a()[n/4+0]=r},M=function(n,t){const _=new Error(v(n,t));return w(_)},S=function(){return D(function(n,t){const _=JSON.parse(v(n,t));return w(_)},arguments)},L=function(n,t){throw new Error(v(n,t))},URL=globalThis.URL;const c=await N({"./tiktoken_bg.js":{__wbindgen_object_drop_ref:T,__wbindgen_is_undefined:z,__wbg_stringify_029a979dfb73aa17:q,__wbindgen_string_get:j,__wbindgen_error_new:M,__wbg_parse_3ac95b51fc312db8:S,__wbindgen_throw:L}},J),X=c.memory,Y=c.__wbg_tiktoken_free,Z=c.tiktoken_new,$=c.tiktoken_name,nn=c.tiktoken_encode,en=c.tiktoken_encode_ordinary,tn=c.tiktoken_encode_with_unstable,_n=c.tiktoken_encode_single_token,rn=c.tiktoken_decode,on=c.tiktoken_decode_single_token_bytes,dn=c.tiktoken_token_byte_values,an=c.get_encoding,sn=c.encoding_for_model,cn=c.__wbindgen_export_0,bn=c.__wbindgen_export_1,ln=c.__wbindgen_add_to_stack_pointer,wn=c.__wbindgen_export_2,un=c.__wbindgen_export_3,gn=Object.freeze(Object.defineProperty({__proto__:null,__wbg_tiktoken_free:Y,__wbindgen_add_to_stack_pointer:ln,__wbindgen_export_0:cn,__wbindgen_export_1:bn,__wbindgen_export_2:wn,__wbindgen_export_3:un,encoding_for_model:sn,get_encoding:an,memory:X,tiktoken_decode:rn,tiktoken_decode_single_token_bytes:on,tiktoken_encode:nn,tiktoken_encode_ordinary:en,tiktoken_encode_single_token:_n,tiktoken_encode_with_unstable:tn,tiktoken_name:$,tiktoken_new:Z,tiktoken_token_byte_values:dn},Symbol.toStringTag,{value:"Module"}));W(gn)})();export{p as Tiktoken,pn as __tla,S as __wbg_parse_3ac95b51fc312db8,W as __wbg_set_wasm,q as __wbg_stringify_029a979dfb73aa17,M as __wbindgen_error_new,z as __wbindgen_is_undefined,T as __wbindgen_object_drop_ref,j as __wbindgen_string_get,L as __wbindgen_throw,I as encoding_for_model,R as get_encoding};
